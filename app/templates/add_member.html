{% include 'includes/header.html' %}

<div class="content">
  <div class="container mt-5">
    <h1>Add Member</h1>

    <div class="form-group">
      <label for="name">Name</label>
      <input
        type="text"
        class="form-control"
        id="name"
        placeholder="Enter name"
        required
      />
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        class="form-control"
        id="email"
        placeholder="Enter email"
        required
      />
    </div>

    <div class="form-group">
      <label for="address">Address</label>
      <input
        type="text"
        class="form-control"
        id="address"
        placeholder="Enter address"
        required
      />
    </div>

    <div class="form-group">
      <label for="phone">Phone</label>
      <input
        type="text"
        class="form-control"
        id="phone"
        placeholder="Enter phone number"
        required
      />
    </div>

    <div class="form-group">
      <label for="dob">Date of Birth</label>
      <input type="date" class="form-control" id="dob" required />
    </div>

    <div class="form-group">
      <label for="gender">Gender</label>
      <select class="form-control" id="gender" required>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
      </select>
    </div>

    <div class="form-group">
      <label for="staff_id">Staff ID</label>
      <input
        type="text"
        class="form-control"
        id="staff_id"
        placeholder="Enter Staff ID"
        required
      />
    </div>

    <a onClick="submitform()" class="btn btn-primary">Submit</a>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</div>
<script>
  function submitform() {
    //   // Collect form data
    var formData = {
      fullname: document.getElementById("name").value,
      email: document.getElementById("email").value,
      phoneno: document.getElementById("phone").value,
      address: document.getElementById("address").value,
      staff_id: document.getElementById("staff_id").value,
      dob: document.getElementById("dob").value,
      password: "1234", // Default password
      gender: document.getElementById("gender").value,
      cooperative_id: "2222222222",
    };
    // Send POST request to the endpoint
    fetch("http://localhost:5000/cooperative/members/create", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(formData),
    })
      .then(function (response) {
        if (!response.ok) {
          throw Error(response.statusText);
        }
        return response.json();
      })
      .then(function (data) {
        alert("Member added successfully");
        console.log(data);

        window.location.href = "/dashboard.html";
      })
      .catch(function (error) {
        alert("Error adding member: " + error);
        console.error("Error:", error);
      });
  }
</script>
{% include 'includes/footer.html' %}
